# TODO: should be single docker image with tomcat as base image for the app
# or embed tomcat in the app
services:
  # db:
  #   image: mysql:5.7
  #   volumes:
  #     - /opt/test:/var/lib/mysql
  #     - ./mysql-dump:/docker-entrypoint-initdb.d
  #   environment:
  #     MYSQL_ROOT_PASSWORD: root
  #     MYSQL_DATABASE: testdb1
  #     MYSQL_USER: testuser
  #     MYSQL_PASSWORD: root
  #   ports:
  #     - 3306:3306
  # phpmyadmin:
  #   depends_on:
  #     - db
  #   image: phpmyadmin/phpmyadmin
  #   ports:
  #     - "8081:80"
  #   environment:
  #     PMA_HOST: db
  #     MYSQL_ROOT_PASSWORD: root
  tomcat:
    # develop:
    #   watch:
    #     - action: sync
    #       path: ./build/libs
    #       target: /usr/local/tomcat/webapps
    # depends_on:
    #   - db
    image: tomcat:9-jdk21-temurin-jammy
    volumes:
      # - ./target/LoginWebApp-1.war:/usr/local/tomcat/webapps/LoginWebApp-1.war
      - ./build/libs/:/usr/local/tomcat/webapps/
    ports:
      - "8080:8080"
    environment:
      - TOMCAT_USERNAME=admin
      - TOMCAT_PASSWORD=admin
#   MYSQL_ROOT_PASSWORD: root
#   MYSQL_DATABASE: testdb1
#   MYSQL_USER: testuser
#   MYSQL_PASSWORD: root
